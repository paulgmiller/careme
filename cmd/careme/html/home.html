<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Careme</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;margin:2rem;background:#f7f7f9}
    .card{background:#fff;padding:1.5rem;border-radius:8px;max-width:720px;margin:0 auto;box-shadow:0 2px 8px rgba(0,0,0,0.06)}
    h1{margin-top:0}
    form{margin-top:1rem}
    input[type=text],input[type=email]{padding:0.5rem;width:200px;margin-right:0.5rem}
    button{padding:0.5rem 0.75rem}
  </style>
  {{.ClarityScript}}
</head>
<body>
  <div class="card">
    <h1>Careme</h1>
    <div>
      <pre style="white-space:pre-wrap">Careme is your personal chef and sommilier. It will

1. Take yoru favorite grocery store based on location
2. Check the stores inventory for fresh meat and seasonal produce
3. Generate a weekly meal plan from a variety of cuisines and cooking styles.
</pre>
    </div>

    {{if .User}}
    <div style="margin-bottom:1rem">
      <p style="margin:0">Signed in as <strong>{{if .User.Email}}{{index .User.Email 0}}{{end}}</strong></p>
      <small>User ID: <code>{{.User.ID}}</code></small>
      <div style="margin-top:0.5rem">
        <a href="/user" style="color:#2563eb;text-decoration:none;margin-right:1rem">View Profile</a>
        <form method="POST" action="/logout" style="display:inline">
          <button type="submit">Sign out</button>
        </form>
      </div>
    </div>

    {{if .FavoriteLocation}}
    <div style="margin-bottom:1.5rem;padding:1rem;background:#f0fdf4;border-left:4px solid #22c55e;border-radius:4px">
      <p style="margin:0 0 0.5rem 0"><strong>Your Favorite Store:</strong></p>
      <p style="margin:0 0 0.5rem 0">{{.FavoriteLocation.Name}}</p>
      <p style="margin:0 0 0.75rem 0;color:#666;font-size:0.9rem">{{.FavoriteLocation.Address}}</p>
      <a href="/recipes?location={{.FavoriteLocation.ID}}" style="display:inline-block;background:#22c55e;color:#fff;padding:0.5rem 0.75rem;text-decoration:none;border-radius:4px;font-size:0.9rem">Generate Recipes</a>
    </div>
    {{end}}

    <form method="GET" action="/locations">
      <label for="zip">Enter ZIP code to pick a nearby store:</label><br>
      <input type="text" id="zip" name="zip" placeholder="e.g. 90210" required pattern="\d{5}">
      <button type="submit">Find Stores</button>
    </form>
    {{else}}
    <form method="POST" action="/login">
      <label for="email">Enter your email to continue:</label><br>
      <input type="email" id="email" name="email" placeholder="you@example.com" required>
      <button type="submit">Continue</button>
    </form>
    {{end}}
  </div>
</body>
</html>
