<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Careme - User Profile</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;margin:2rem;background:#f7f7f9}
    .card{background:#fff;padding:1.5rem;border-radius:8px;max-width:720px;margin:0 auto;box-shadow:0 2px 8px rgba(0,0,0,0.06)}
    h1,h2{margin-top:0}
    h2{font-size:1.2rem;margin-top:1.5rem;margin-bottom:0.5rem}
    form{margin-top:1rem}
    .form-group{margin-bottom:1rem}
    label{display:block;margin-bottom:0.25rem;font-weight:500}
    input[type=text],input[type=email],select{padding:0.5rem;width:100%;max-width:400px;border:1px solid #ddd;border-radius:4px;font-size:1rem}
    button{padding:0.5rem 0.75rem;background:#2563eb;color:#fff;border:0;border-radius:4px;cursor:pointer;font-size:1rem}
    button:hover{background:#1d4ed8}
    .back-link{display:inline-block;margin-bottom:1rem;color:#2563eb;text-decoration:none}
    .back-link:hover{text-decoration:underline}
    .email-list{list-style:none;padding:0}
    .email-list li{padding:0.25rem 0}
    .recipe-list{list-style:none;padding:0}
    .recipe-list li{padding:0.5rem 0;border-bottom:1px solid #eee}
    .recipe-list li:last-child{border-bottom:none}
    small{color:#666}
    .success{color:#22c55e;margin-top:1rem;padding:0.5rem;background:#f0fdf4;border-radius:4px}
  </style>
  {{.ClarityScript}}
</head>
<body>
  <div class="card">
    <a href="/" class="back-link">‚Üê Back to Home</a>
    <h1>User Profile</h1>

    {{if .Success}}
    <div class="success">Settings saved successfully!</div>
    {{end}}

    <h2>Account Information</h2>
    <div class="form-group">
      <label>Email Addresses:</label>
      <ul class="email-list">
        {{range .User.Email}}
        <li>{{.}}</li>
        {{end}}
      </ul>
    </div>
    <div class="form-group">
      <label>Member Since:</label>
      <small>{{.User.CreatedAt.Format "January 2, 2006"}}</small>
    </div>

    <h2>Preferences</h2>
    <form method="POST" action="/user">
      <div class="form-group">
        <label for="favorite_store">Favorite Store:</label>
        <input type="text" id="favorite_store" name="favorite_store" value="{{.User.FavoriteStore}}" placeholder="Store ID or name">
      </div>

      <div class="form-group">
        <label for="shopping_day">Shopping Day of Week:</label>
        <select id="shopping_day" name="shopping_day">
          <option value="">Select a day...</option>
          <option value="Sunday" {{if eq .User.ShoppingDay "Sunday"}}selected{{end}}>Sunday</option>
          <option value="Monday" {{if eq .User.ShoppingDay "Monday"}}selected{{end}}>Monday</option>
          <option value="Tuesday" {{if eq .User.ShoppingDay "Tuesday"}}selected{{end}}>Tuesday</option>
          <option value="Wednesday" {{if eq .User.ShoppingDay "Wednesday"}}selected{{end}}>Wednesday</option>
          <option value="Thursday" {{if eq .User.ShoppingDay "Thursday"}}selected{{end}}>Thursday</option>
          <option value="Friday" {{if eq .User.ShoppingDay "Friday"}}selected{{end}}>Friday</option>
          <option value="Saturday" {{if eq .User.ShoppingDay "Saturday"}}selected{{end}}>Saturday</option>
        </select>
      </div>

      <button type="submit">Save Preferences</button>
    </form>

    <h2>Past Recipes</h2>
    {{if .User.LastRecipes}}
    <ul class="recipe-list">
      {{range .User.LastRecipes}}
      <li>{{.}}</li>
      {{end}}
    </ul>
    {{else}}
    <p><small>No recipes generated yet. <a href="/">Generate your first recipe</a>!</small></p>
    {{end}}
  </div>
</body>
</html>
